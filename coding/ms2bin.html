<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../pandoc.css" type="text/css" />
  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="generator" content="pandoc" />
    <title></title>
    <style type="text/css">code{white-space: pre;}</style>
    <link rel="stylesheet" href="pandoc.css" type="text/css" />
  </head>
  <body>
  <p><a href="http://www.plosgenetics.org/article/info%3Adoi%2F10.1371%2Fjournal.pgen.1003258"> <img src="http://molpopgen.org/images/journal.pgen.1003258.g001.png" style="width: 300px;"></a> <a href="http://mbe.oxfordjournals.org/content/31/7/1750.full"> <img src="http://www.molpopgen.org/images/F6.large.jpg" style="width: 300px;" height="300px"></a> <a href="http://mbe.oxfordjournals.org/content/30/10/2311.full"> <img src="http://www.molpopgen.org/images/F4.large.jpg" style="width: 300px;" height="300px"></a></p>
  <h4 id="home-publications-research-people-news-software-data-resources-blog"><a href="index.html">Home</a> || <a href="pubs.html">Publications</a> || <a href="research.html">Research</a> || <a href="people.html">People</a> || <a href="news.html">News</a> || <a href="software.html">Software</a> || <a href="data.html">Data</a> || <a href="res.html">Resources</a> || <a href="blog.html">Blog</a></h4>
  </body>
  </html>
</head>
<body>
<h1 id="example-writing-data-in-a-binary-format">Example: writing data in a binary format</h1>
<p>I recently wrote a <a href="https://github.com/molpopgen/BigDataFormats">tutorial</a> on computational techniques for “big data”. It covers moving beyond large ASCII files to gzip and/or binary format. For this post, I cover a concrete example of re-writing data data into a gzipped binary format.</p>
<h2 id="the-data">The data</h2>
<p>The input data are the output of Hudson’s <a href="http://http://home.uchicago.edu/~rhudson1/source/mksamples.html">ms</a>, a widely-used coalescent simulation program.</p>
<p>A typical “ms” output looks something like this:</p>
<pre><code>//
segsites: 5
positions: 0.1145 0.4935 0.6554 0.8684 0.9145 
00101
10111
00111
00111
01000</code></pre>
<p>In this example, there are 5 mutations with positions on the half-open interval [0,1). There are then 5 haplotypes. For each haplotype, 0 is the ancestral state and 1 is the derived (mutant) allele.</p>
<p>We can write this data in a more compact format like this:</p>
<pre><code>5 5
0.1145 0.4935 0.6554 0.8684 0.9145
2 2 4
4 0 2 3 4
3 2 3 4
3 2 3 4
1 1</code></pre>
<p>The first two numbers are the number of mutations and sample size, respectively. These are unsigned integers. There are then 5 floating-point values representing mutation positions. Finally, there are 5 lines, one per haplotype. Each haplotype line contains the number of derived mutations on that haplotype, followed by the indexes (numbers from 0 to 4, the total number of mutations) where each derived mutation is found.</p>
<h2 id="using-libsequence">Using libsequence</h2>
<p>This is how to convert such data using routines already present in <a href="http://molpopgen.github.io/libsequence">libsequence</a>:</p>
<script src="https://gist.github.com/molpopgen/419aab1b84241ec61b61.js"></script>
</body>
</html>
